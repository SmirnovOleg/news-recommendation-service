# News Recommendation Service

REST API сервис для просмотра новостных объявлений (и прочих постов сообщества) с возможностью получения
персональных рекомендаций и поиском "похожих" новостей.

### Бизнес-логика

Существуют администраторы (редакторы) и обычные пользователи. Администратор (в простейшем случае один) может
добавлять новости на платформу, пользователи могут их просматривать и комментировать. Также пользователи могут
получать рекомендации, основываясь на истории своих недавних просмотров за последнюю неделю, или запрашивать
"похожие" на какой-то конкретный пост новости. Для любого запроса, где ответ включает несколько постов /
комментариев, есть пагинация.

### Технические особенности:

- Асинхронный REST API сервис на `FastAPI`
- Аутентификация пользователей с помощью `OAuth2` и `JWT`
- СУБД `SQLite` (с асинхронным взаимодействием через `SQLAlchemy`) для хранения таблиц пользователей, постов и
  комментариев
- Рекомендации постов основаны на векторизации новостных заголовков с помощью pre-trained модели `GloVe` и
  алгоритма поиска `k` ближайших соседей в пространстве векторов
- Полученные эмбеддинги и история просмотров за последнюю неделю асинхронно кэшируется в `Redis`

---

Модель для подсчета эмбеддингов весит ~440Mb и скачивается автоматически при старте docker-контейнера. Можно
скачать её
отдельно [здесь](https://public.ukp.informatik.tu-darmstadt.de/reimers/sentence-transformers/v0.2/average_word_embeddings_glove.6B.300d.zip)
и распаковать в директорию `.model/` в корне репозитория, после чего она попадёт в docker-контейнер при
сборке.

### Run server

    docker-compose up

### Run tests:

    docker-compose run --rm app make docker-test

### Create venv:

    make venv

### Run formatters & linters:

    make format lint


